(function(a){a.NZ_Window={show:function(n){var j={content:null,url:null,title:"",type:0,width:600,height:350,maximize:false,scrollbar:{x:false,y:true},operate:{btn_Close:true,btn_Max:true,btn_Refresh:false,btn_NewWindow:false,resize:true},style:{btnColor:"black",titleBarColor:"",bgColor:"#111"},callback:null};if(typeof n=="object"&&n.type==1){j.width="60%"}var o=a.extend({},j,n);o.operate=a.extend({},j.operate,typeof n=="object"?n.operate:{});o.style=a.extend({},j.style,typeof n=="object"?n.style:{});o.scrollbar=a.extend({},j.scrollbar,typeof n=="object"?n.scrollbar:{});if(o.width.toString().indexOf("%")>-1&&o.type!=1){o.width=a(window).width()*(parseFloat(o.width.replace(/%/g,""))/100)}if(o.height.toString().indexOf("%")>-1){o.height=a(window).height()*(parseFloat(o.height.replace(/%/g,""))/100)}else{o.height=parseFloat(o.height)}var u=l();switch(o.type){case 0:var b=a('<div class="NZ-Window-bg"></div>');b.css("background-color",o.style.bgcolor);var i=a('<div class="NZ-Window-normal"></div>');i.data("config",o);i.css({width:o.width,height:o.height,left:(a(window).width()-o.width)/2,top:a(window).height()>o.height?(a(window).height()-o.height)/2:0});var r=a('<div class="NZ-Window-normal-title"></div>');r.html(o.title);if(a.trim(o.style.titleBarColor)!=""){r.css("background-color",o.style.titleBarColor)}if(o.style.btnColor=="white"){r.css("color","#fff")}var h=a('<div class="NZ-Window-normal-conLocation NZ-Window-normal-con"></div>');if(o.content!=null){h.append(o.content);i.find(".NZ-Window-normal-con").css({"overflow-x":o.scrollbar.x,"overflow-y":o.scrollbar.y})}else{if(o.url!=null){q(i);i.on("animationend.loadinit webkitAnimationEnd.loadinit",function(){var z=a(this);i.find(".NZ-Window-normal-con").css("overflow","hidden");var x=a('<iframe src="'+o.url+'"></iframe>');x.on("load",function(){z.find(".NZ-Window-normal-loadingbg,.NZ-Window-loading").animate({opacity:"0"},300,"linear",function(){a(this).remove()})});h.append(x)})}}i.append(r).append(h);if(o.operate.resize){var p=a('<div class="NZ-Window-normal-resize"></div>');i.append(p);this.WindowSize.Resize(p,i)}var m=a('<ul class="NZ-Window-normal-operate"></ul>');var c=null,d=null,e=null,f=null;if(o.operate.btn_Close){c=a('<li class="close '+o.style.btnColor+'"></li>');m.append(c)}if(o.operate.btn_Max){d=a('<li class="max '+o.style.btnColor+'"></li>');m.append(d);if(o.maximize){i.data("windowstate","max");var v=a(window).width()*0.7,t=a(window).height()*0.7;i.data("windowinitsize",{wwidth:v,wheight:t,wleft:(a(window).width()-v)/2,wtop:(a(window).height()-t)/2});i.css({width:a(window).width(),height:a(window).height(),left:0,top:0}).find(".max").removeClass("max").addClass("normal");this.WindowSize.destroy(i.find(".NZ-Window-normal-resize"));r.NZDrag("destroy")}else{i.data("windowstate","normal");if(o.operate.resize){this.WindowSize.Resize(i.find(".NZ-Window-normal-resize"),i)}r.NZDrag("init",{bydragobj:i})}}if(o.operate.btn_Refresh&&o.url!=null){f=a('<li class="refresh '+o.style.btnColor+'"></li>');m.append(f)}if(o.operate.btn_NewWindow&&o.url!=null){e=a('<li class="newWindow '+o.style.btnColor+'"></li>');m.append(e)}i.append(m);var w=k();i.data("windowid",u).addClass("NZ-Window-normal-marchIn").css("z-index",w);b.data("windowid",u).addClass("NZ-Window-bg-Motion-In").css("z-index",w);a(document.body).append(b).append(i);r.NZDrag("init",{bydragobj:i});c?c.click({id:u,wfunction:this},function(x){x.data.wfunction.close(x.data.id,o.callback)}):null;d?d.click({id:u,wfunction:this},function(x){x.data.wfunction.Maximize(x.data.id)}):null;f?f.click({window:i},function(x){if(x.data.window.find("iframe").length>0){q(x.data.window);x.data.window.find("iframe").attr("src",x.data.window.find("iframe").attr("src"))}}):null;e?e.click({windowobj:i},function(x){if(x.data.windowobj.find("iframe").length>0){window.open(x.data.windowobj.find("iframe").attr("src"),"_blank")}}):null;break;case 1:var s=a('<div class="NZ-Window-panel-virtual"></div>');var i=a('<div class="NZ-Window-panel"></div>');var b=a('<div class="NZ-Window-bg"></div>');var g=a('<div class="fas fa-remove NZ-Window-panel-Close"></div>');i.append(g);a(document.body).data("overflow-y",a(document.body).css("overflow-y"));a(document.body).data("overflow-x",a(document.body).css("overflow-x"));a(document.body).css({"overflow-y":"hidden","overflow-x":"hidden"});var w=k();b.css({"z-index":w-1,"background-color":"#000",opacity:"0"});i.append(o.content).css({width:o.width}).children().show();s.append(i).css({"z-index":w+1});s.mousedown(function(){i.removeClass("NZ-motion-panelIn").addClass("NZ-motion-ghost");i.on("animationend.ghost webkitAnimationEnd.ghost",function(){a(this).removeClass("NZ-motion-ghost")})});i.mousedown(function(x){if(x&&x.stopPropagation){x.stopPropagation()}else{window.event.cancelBubble=true}});g.click(function(x){i.addClass("NZ-motion-panelOut");i.bind("animationend.close webkitAnimationEnd.close",function(){s.remove()});b.animate({opacity:0},800,function(){a(document.body).css({"overflow-y":a(document.body).data("overflow-y"),"overflow-x":a(document.body).data("overflow-x")});a(this).remove()});if(x&&x.stopPropagation){x.stopPropagation()}else{window.event.cancelBubble=true}});i.addClass("NZ-motion-panelIn");a(document.body).append(b);a(document.body).append(s);b.animate({opacity:0.5},800);s.scroll(function(){g.css("top",a(this).scrollTop())});break;default:break}return u;function k(){var x=0;a(document.body).children().each(function(){if(parseInt(a(this).css("z-index"))>x){x=parseInt(a(this).css("z-index"))}});if(x===0){x=9999}return x}function l(){return"windowxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var z=Math.random()*16|0,A=x=="x"?z:(z&3|8);return A.toString(16)})}function q(x){var A=a('<div class="NZ-Window-normal-conLocation NZ-Window-normal-loadingbg"></div>');var z=a('<div class="NZ-Window-loading"><div class="k-line k-line11-1"></div><div class="k-line k-line11-2"></div><div class="k-line k-line11-3"></div><div class="k-line k-line11-4"></div><div class="k-line k-line11-5"></div></div>');x.append(A).append(z)}},close:function(d,c){if(typeof d==="undefined"||d===null||d===""){return}var e=null,b=null;a(".NZ-Window-normal").each(function(){if(a(this).data("windowid")===d){e=a(this);return false}});a(".NZ-Window-bg").each(function(){if(a(this).data("windowid")===d){b=a(this);return false}});e.removeClass("NZ-Window-normal-marchIn").addClass("NZ-Window-normal-marchOut");b.removeClass("NZ-Window-bg-Motion-In").addClass("NZ-Window-bg-Motion-Out");e.on("animationend.close webkitAnimationEnd.close",function(){a(this).remove();if(typeof c==="function"){c()}});b.on("animationend.close webkitAnimationEnd.close",function(){a(this).remove()})},Maximize:function(d){var b=this;if(typeof d==="undefined"||d===null||d===""){return}var e=null;a(".NZ-Window-normal").each(function(){if(a(this).data("windowid")==d){e=a(this);return false}});if(e){var c=e.data("config");var f="normal";if(e.data("windowstate")==="normal"){e.data("windowinitsize",{wwidth:e.width(),wheight:e.height(),wleft:e.css("left"),wtop:e.css("top")});e.animate({width:a(window).width(),height:a(window).height(),left:0,top:0},350,function(){e.data("windowstate","max");e.find(".max").removeClass("max").addClass("normal")});this.WindowSize.destroy(e.find(".NZ-Window-normal-resize"));e.find(".NZ-Window-normal-title").NZDrag("destroy")}else{e.animate({width:e.data("windowinitsize").wwidth,height:e.data("windowinitsize").wheight,left:e.data("windowinitsize").wleft,top:e.data("windowinitsize").wtop},350,function(){e.data("windowstate","normal");e.find(".normal").removeClass("normal").addClass("max");if(c.operate.resize){b.WindowSize.Resize(e.find(".NZ-Window-normal-resize"),e)}e.find(".NZ-Window-normal-title").NZDrag("init",{bydragobj:e})})}}},WindowSize:{Resize:function(b,f){var c=a(f),h=y=0;var g=a('<div style="position:fixed;width:'+f.outerWidth()+"px;height:"+f.outerHeight()+"px;z-index:"+(parseInt(a(f).css("z-index"))+1)+";left:"+a(f).css("left")+";top:"+a(f).css("top")+';opacity:0.6; filter:alpha(opacity=60);background-color:#fff;border:1px solid #ddd;cursor: nwse-resize;"></div>');a(b).bind("mousedown.nzwindow",function(i){if(f.outerWidth()<a(window).width()){g.css({width:a(f).outerWidth()+"px",height:a(f).outerHeight()+"px","z-index":(parseInt(a(f).css("z-index"))+1),left:a(f).css("left"),top:a(f).css("top")});g.appendTo("body");h=i.clientX-c.outerWidth(),y=i.clientY-c.outerHeight();b.setCapture?(b.setCapture(),b.onmousemove=function(j){d(j||event)},b.onmouseup=e):(a(document).bind("mousemove",d).bind("mouseup",e));i.preventDefault()}});function d(i){g.width(((i.clientX-h)<100)?"100":((a(window).width()-5)<(i.clientX-h)?(a(window).width()-5):(i.clientX-h))+"px");g.height(((i.clientY-y)<100)?"100":((a(window).height()-5)<(i.clientY-y)?(a(window).height()-5):(i.clientY-y))+"px")}function e(m){var j=parseInt(c.css("border-left-width"));var i=parseInt(c.css("border-bottom-width"));var l=g.width();var k=g.height();c.animate({width:l,height:k},function(){c.children(".window-content").css({height:k-parseInt(c.children(".window-title").height())});if(a(this).children(".window-content").children("iframe").length>0){c.children(".window-content").children("iframe").css({height:k-parseInt(c.children(".window-title").height()),width:"100%"})}g.remove()});b.releaseCapture?(b.releaseCapture(),b.onmousemove=b.onmouseup=null):(a(document).unbind("mousemove",d).unbind("mouseup",e))}},destroy:function(b){a(b).unbind("mousedown.nzwindow")}}}})(jQuery);